//
//  LuaClassSupport.cpp
//  GameBox
//
//  Created by Caspar on 2013-5-3.
//
//

#include "LuaClassSupport.h"
#include "tolua++.h"

USING_NS_CC;
using namespace ptola::script;

char* __classModAndSteal(char* str, size_t len)
{
    char* p = str;int i = 0x8;
    while(len-->0){*p++^=i++;i=i>50?0:i;}
    return str;
}

void CLuaClassSupport::initialize(CCLuaEngine *pLuaEngine)
{
    if( pLuaEngine == NULL )
        return;
    CCLuaStack *pLuaStack = pLuaEngine->getLuaStack();
    if( pLuaStack == NULL )
        return;
    lua_State *L = pLuaStack->getLuaState();
    if( L == NULL )
        return;
    char lpBuffer[] = {0x6e,0x7c,0x64,0x68,0x78,0x64,0x61,0x61,0x30,0x72,0x7e,0x72,0x67,0x66,0x3e,0x75,0x79,0x6a,0x7f,0x37,0x3c,0x7e,0x6a,0x70,0x52,0x8,0x28,0x4f,0x4b,0x46,0x47,0x4b,0x8,0x4a,0xa,0x16,0xc,0x56,0x53,0x25,0x59,0x57,0x12,0x6e,0x6e,0x76,0x23,0x67,0x71,0x69,0x75,0x28,0x68,0x64,0x6f,0x2c,0x79,0x77,0x7f,0x75,0x39,0x70,0x72,0x67,0x70,0x3f,0x37,0x25,0x24,0x3a,0x3c,0x7a,0x68,0x70,0x7c,0x54,0x48,0x4d,0x4d,0x3,0x5,0x52,0x4f,0x4d,0x47,0x20,0x48,0x58,0x42,0x5c,0xf,0xd,0x11,0x50,0x61,0x72,0x67,0x9,0x66,0x64,0x75,0x62,0x28,0x34,0x2a,0x65,0x65,0x61,0x4,0x6a,0x7c,0x62,0x77,0x7a,0x72,0x35,0x62,0x6e,0x68,0x7c,0x32,0x79,0x7d,0x6e,0x7b,0x36,0x0,0x1c,0x1f,0x3,0x3,0x51,0x47,0x45,0x44,0x4c,0xd,0xb,0x58,0x45,0x4b,0x41,0x3a,0x57,0x5d,0x72,0x21,0x6b,0x2f,0x72,0x25,0x6f,0x69,0x28,0x79,0x6b,0x62,0x7e,0x7e,0x26,0x6d,0x71,0x62,0x77,0x3a,0x34,0x71,0x79,0x1d,0x7b,0x42,0x73,0x46,0x3c,0x20,0x3e,0x69,0x2a,0x44,0x4c,0x47,0x2e,0x46,0x8,0x78,0x4a,0x48,0x59,0x4e,0xc,0x10,0xe,0x4d,0x51,0x42,0x57,0xa,0x64,0x6c,0x67,0xe,0x66,0x28,0x58,0x57,0x60,0x64,0x6f,0x69,0x75,0x2e,0x32,0x30,0x72,0x18,0x7f,0x7b,0x76,0x77,0x7b,0x38,0x74,0x6e,0x3b,0x21,0x3d,0x65,0x62,0x2a,0x4c,0x56,0xd,0x7b,0x7a,0x45,0x46,0x44,0x45,0xa,0x16,0xc,0x4b,0x5b,0x41,0x53,0x45,0x5b,0x6f,0x6f,0x2a,0x60,0x68,0x64,0x75,0x74,0x57,0x7d,0x68,0x67,0x20,0x2d,0x20,0x21,0x3e,0x38,0x18,0x7f,0x7b,0x76,0x77,0x7b,0x38,0x76,0x78,0x71,0x3c,0x20,0x3e,0x64,0x5d,0x2b,0x51,0x46,0x50,0x48,0x43,0x53,0x49,0x5d,0x4b,0x49,0x40,0x48,0x6,0x40,0x52,0x5b,0x1e,0x63,0x28,0x8,0x6a,0x62,0x25,0x65,0x73,0x67,0x7b,0x2a,0x7f,0x64,0x68,0x60,0x5,0x73,0x65,0x7d,0x61,0x3c,0x7a,0x74,0x7d,0x34,0x37,0x34,0x35,0x35,0x17,0x7b,0x73,0x53,0x44,0x28,0x4a,0x42,0x5,0x44,0x46,0x5b,0x4c,0xa,0x4a,0x42,0x49,0xe,0x4d,0x51,0x42,0x57,0x2e,0x62,0x76,0x6c,0x76,0x25,0x72,0x6f,0x6d,0x67,0x0,0x69,0x6d,0x7e,0x6b,0x21,0x73,0x65,0x7d,0x61,0x3c,0x7a,0x74,0x7d,0x34,0x39,0x34,0x35,0x32,0x34,0x14,0x7a,0x4e,0x45,0x28,0x46,0x4a,0x41,0x2c,0x55,0x4d,0x5d,0x5f,0x59,0x42,0xd,0x41,0x4d,0x5a,0x3b,0x57,0x6e,0x65,0x8,0x60,0x2a,0x66,0x72,0x68,0x7a,0x29,0x37,0x2b,0x6f,0x79,0x61,0x7d,0x1a,0x72,0x3c,0x7a,0x67,0x35,0x2b,0x37,0x7e,0x6c,0x74,0x78,0x68,0x74,0x71,0x71,0x8,0x52,0x47,0x4f,0x42,0x9,0x6,0x4c,0x44,0x48,0x59,0x58,0x5,0x27,0x42,0x40,0x53,0x50,0x5e,0x20,0x6c,0x22,0x3e,0x24,0x62,0x63,0x73,0x65,0x6c,0x7e,0x6a,0x78,0x6c,0x6c,0x63,0x75,0x39,0x61,0x76,0x78,0x73,0x3f,0x1d,0x6f,0x71,0x73,0x77,0x79,0x3d,0x73,0x3f,0x44,0x4e,0x2,0x29,0x4d,0x43,0x6,0x4a,0x8,0x14,0x17,0xb,0x47,0x41,0x4f,0x5c,0x43,0x11,0x46,0x68,0x64,0x6c,0x23,0x76,0x60,0x72,0x72,0x7a,0x67,0x2a,0x7f,0x7e,0x78,0x6b,0x2f,0x75,0x7f,0x76,0x19,0x79,0x35,0x2b,0x37,0x75,0x37,0x45,0x79,0x7d,0x6e,0x7b,0x15,0x45,0x4f,0x46,0x29,0x56,0x40,0x52,0x52,0x5a,0x47,0xa,0x4d,0x4d,0x41,0x5d,0x4a,0x3a,0x54,0x5c,0x64,0xb,0x71,0x66,0x70,0x68,0x63,0x73,0x69,0x7d,0x6b,0x69,0x60,0x68,0x26,0x6c,0x3c,0x31,0x7f,0x67,0x3d,0x1f,0x64,0x72,0x6c,0x6c,0x68,0x75,0x3c,0x7e,0x14,0x7a,0x4e,0x45,0x0};
    luaL_dostring(L, __classModAndSteal(lpBuffer, 587));
    lua_checkstack(L, 100);
}